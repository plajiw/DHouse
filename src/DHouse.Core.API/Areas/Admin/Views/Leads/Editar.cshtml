@model DHouse.Core.Domain.Entities.Lead
@{
    Layout = "_Layout"; ViewData["Title"] = "Lead";
}
<div class="flex justify-between mb-4">
    <h1 class="text-xl font-semibold">@Model.Nome</h1>
    <div class="flex gap-2">
        @foreach (var s in Enum.GetValues(typeof(DHouse.Core.Domain.Enums.StatusLead)).Cast<DHouse.Core.Domain.Enums.StatusLead>())
        {
            <button class="px-3 py-1 rounded border"
                    hx-post="/admin/leads/@Model.Id/status"
                    hx-include="[name=status]"
                    hx-vals='{"status":"@s"}'
                    hx-target="#leadStatus"
                    hx-swap="outerHTML">
                @s
            </button>
        }
    </div>
</div>

<div class="mb-6" id="leadStatus">
    @await Html.PartialAsync("_LeadBadge", Model)
</div>

<div class="grid md:grid-cols-2 gap-6">
    <div class="bg-white p-4 rounded-xl shadow">
        <h2 class="font-semibold mb-3">Contato</h2>
        <p><b>Telefone:</b> @Model.Telefone</p>
        <p><b>E-mail:</b> @Model.Email</p>
        @if (!string.IsNullOrWhiteSpace(Model.Telefone))
        {
            <button class="mt-3 px-3 py-2 rounded bg-emerald-600 text-white"
                    hx-post="/api/whatsapp/send"
                    hx-headers='{"Content-Type":"application/json"}'
                    hx-vals='{"to":"@Model.Telefone","message":"Olá @Model.Nome, aqui é da D HOUSE IMÓVEIS. Estou à disposição para te atender."}'
                    hx-swap="none">
                Enviar WhatsApp
            </button>
        }
    </div>

    <div class="bg-white p-4 rounded-xl shadow">
        <h2 class="font-semibold mb-3">Observações</h2>
        <pre class="whitespace-pre-wrap">@Model.Observacoes</pre>
    </div>
</div>
